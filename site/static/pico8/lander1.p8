pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
v_x = 0
v_y = 0
size=8
fire = false
gravity = 0--0.02
thrust = 0--.1

function _init()
  reset_lander()
end

function _update()
  check_reset()
  cls()
  ground()
  if not dead then
  move_l()
  update_vel()
  end
  check_dead()
  
  draw_lander()
end

function check_reset()
  if dead or
    lander_x < -50 or
    lander_x > 127+50 or 
    abs(lander_y) > 250 
  then
    reset_lander()
  end
end

function reset_lander()
  lander_x = 64
  lander_y = 30
  v_x = 0
  v_y = 0
  dead = false
end

function check_dead()
  if lander_y+size > 125 then
    dead=true
    lander_y=125-size
    v_x=0
    v_y=0
    fire=false
    
    --sfx(0)
  end
end

function ground()
  rectfill(
    0,125,
    127,127,
    11
  )
end

function update_vel()
  v_y += gravity
  
  fire = false
  if (btn(2)) then
    v_y -= thrust
    fire = true
  end
  if (btn(0)) then v_x-=.2 end
  if (btn(1)) then v_x+=.2 end

  print(v_y.."\n"..lander_y, 90,10)
end

function move_l()
  lander_x += v_x
  lander_y += v_y
end

function draw_lander()
  local clr = 5
  if dead then clr = 8 end

 
 if fire then
   if time() % .3 < (.3/2) then
     spr(1,lander_x,lander_y)
     spr(2,lander_x,lander_y+8)
   else
     spr(4,lander_x,lander_y)
     spr(3,lander_x,lander_y+8)
   end
 else 
	 spr(0,
	    lander_x,
	   lander_y
	 )
 end
end
__gfx__
000660000006600000c8c900008cc900000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0066660000666600099989900888c890006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0066660000666600998c8898888c8c89006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00666600006666009888988998888889006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00666600006666000898999008989990006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00c00c0000c88c00888898889899889900c89c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cc00cc00cc90cc009888980098999800cc09cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c0000c00c9098c080099099090090090c8909c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
112300001a37300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
